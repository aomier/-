<view class="container">
  <!-- è¿›åº¦åŒºåŸŸ -->
  <view class="progress-section glass-effect">
    <view class="progress-header">
      <view class="question-number">
        ç¬¬{{answerNow + 1}}é¢˜ / å…±{{list.length}}é¢˜
      </view>
      <view class="timer {{timeLeft <= 10 ? 'warning' : ''}}">
        <text class="timer-icon">â°</text>
        <text class="timer-text">{{timeLeft}}s</text>
      </view>
    </view>
    
    <view class="progress-bar">
      <view 
        class="progress-fill" 
        style="width: {{(answerNow / list.length) * 100}}%"
      ></view>
    </view>
    
    <view class="score-info">
      <view class="score-item">
        <text class="score-label">æ€»åˆ†</text>
        <text class="score-number">{{totalScore}}</text>
      </view>
      <view class="score-item success">
        <text class="score-label">æ­£ç¡®</text>
        <text class="score-number">{{successNum}}</text>
      </view>
      <view class="score-item error">
        <text class="score-label">é”™è¯¯</text>
        <text class="score-number">{{failNum}}</text>
      </view>
    </view>
  </view>

  <!-- é¢˜ç›®åŒºåŸŸ -->
  <view class="question-section glass-effect {{animationClass}}">
    <view class="question-header">
      <view class="question-type-badge {{currentType === 'choice' ? 'choice-type' : 'blank-type'}}">
        {{currentType === 'choice' ? 'é€‰æ‹©é¢˜' : 'å¡«ç©ºé¢˜'}}
      </view>
    </view>
    
    <view class="question-title">
      {{list[answerNow].title}}
    </view>

    <!-- é€‰æ‹©é¢˜ -->
    <view wx:if="{{currentType === 'choice'}}" class="options-container">
      <radio-group bindchange="radioChange" class="options-list">
        <label 
          wx:for="{{list[answerNow].option}}" 
          wx:key="*this"
          class="option-item {{select === item ? 'selected' : ''}} {{showResult && item === correctAnswer ? 'correct' : ''}} {{showResult && select === item && item !== correctAnswer ? 'incorrect' : ''}}"
        >
          <radio value="{{item}}" checked="{{select === item}}" class="option-radio" />
          <view class="option-content">
            <view class="option-letter">{{index === 0 ? 'A' : index === 1 ? 'B' : index === 2 ? 'C' : 'D'}}</view>
            <view class="option-text">{{item}}</view>
            <view wx:if="{{showResult && item === correctAnswer}}" class="correct-icon">âœ“</view>
            <view wx:if="{{showResult && select === item && item !== correctAnswer}}" class="incorrect-icon">âœ—</view>
          </view>
        </label>
      </radio-group>
    </view>

    <!-- å¡«ç©ºé¢˜ -->
    <view wx:else class="input-container">
      <view class="input-wrapper">
        <input 
          class="answer-input {{showResult && inputAnswer !== correctAnswer ? 'incorrect' : ''}}"
          placeholder="è¯·è¾“å…¥ç­”æ¡ˆ..."
          value="{{inputAnswer}}"
          bindinput="inputChange"
          focus="{{currentType === 'blank' && !isAnswered}}"
          disabled="{{isAnswered}}"
        />
        <view wx:if="{{showResult && inputAnswer === correctAnswer}}" class="input-correct-icon">âœ“</view>
        <view wx:if="{{showResult && inputAnswer !== correctAnswer}}" class="input-incorrect-icon">âœ—</view>
      </view>
      
      <!-- å¡«ç©ºé¢˜æ­£ç¡®ç­”æ¡ˆæ˜¾ç¤º -->
      <view wx:if="{{showResult && inputAnswer !== correctAnswer}}" class="correct-answer-display">
        æ­£ç¡®ç­”æ¡ˆï¼š{{correctAnswer}}
      </view>
    </view>
  </view>

  <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
  <view wx:if="{{showResult}}" class="result-section glass-effect {{status.includes('æ­£ç¡®') ? 'result-success' : 'result-error'}}">
    <view class="result-text">{{status}}</view>
    
    <!-- è§£æåŒºåŸŸ -->
    <view wx:if="{{showExplanation}}" class="explanation-section">
      <view class="explanation-title">ğŸ’¡ é¢˜ç›®è§£æ</view>
      <view class="explanation-content">{{currentExplanation}}</view>
      
      <!-- ç»§ç»­æŒ‰é’®åŒºåŸŸ -->
      <view class="continue-section">
        <button class="continue-btn" bindtap="continueNext">
          <view class="btn-content">
            <text class="btn-icon">â¡ï¸</text>
            <text class="btn-text">ç»§ç»­ä¸‹ä¸€é¢˜</text>
          </view>
        </button>
        <!-- ç­”é”™æ—¶æ˜¾ç¤ºè‡ªåŠ¨æç¤ºï¼Œç­”å¯¹æ—¶æ˜¾ç¤ºæ‰‹åŠ¨æç¤º -->
        <view wx:if="{{!status.includes('æ­£ç¡®')}}" class="auto-tip">4ç§’åè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€é¢˜</view>
        <view wx:else class="auto-tip">1.5ç§’åè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€é¢˜</view>
      </view>
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-section">
    <button 
      class="submit-btn {{isAnswered ? 'disabled' : ''}}" 
      bindtap="submit"
      disabled="{{isAnswered || (currentType === 'choice' && !select) || (currentType === 'blank' && !inputAnswer)}}"
    >
      <view class="btn-content">
        <text class="btn-icon">{{answerNow === list.length - 1 ? 'ğŸ' : 'ğŸ“'}}</text>
        <text class="btn-text">{{answerNow === list.length - 1 ? 'å®Œæˆç­”é¢˜' : 'æäº¤ç­”æ¡ˆ'}}</text>
      </view>
    </button>
  </view>
</view>